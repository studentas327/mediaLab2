<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Media Lab 2 â€“ VR Application</title>

  <!-- Latest A-Frame -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- Point cloud component -->
  <script src="https://unpkg.com/aframe-pointcloud-component@0.5.0/dist/aframe-pointcloud-component.min.js"></script>

  <!-- A-Frame GUI -->
  <script src="https://unpkg.com/aframe-gui/dist/aframe-gui.min.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: Arial, Helvetica, sans-serif;
    }
  </style>
</head>

<body>
  <a-scene background="color: #1b2735">

    <!-- Camera -->
    <a-entity camera look-controls position="0 1.6 0"></a-entity>

    <!-- Lights -->
    <a-light type="ambient" intensity="0.8"></a-light>
    <a-light type="directional" position="1 3 2"></a-light>

    <!-- POINT CLOUD MODEL (ONLY ONE) -->
    <a-entity
      id="model"
      pointcloud="src: Sphere.ply; pointSize: 0.02; color: #00ffcc"
      position="0 1.2 -3"
      scale="1 1 1"
      rotation="0 0 0">
    </a-entity>

    <!-- Background -->
    <a-sky src="VGTU-logo.png" rotation="0 -90 0"></a-sky>

    <!-- GUI PANEL -->
    <a-entity position="0 1.3 -1.3" gui-interactable>
      <a-gui-panel
        width="2.2"
        height="2.4"
        background-color="#222">

        <a-gui-label
          value="Model Controls"
          position="0 0.9 0"
          width="1.8"
          height="0.3">
        </a-gui-label>

        <a-gui-button
          value="Rotate"
          width="1.8"
          height="0.4"
          position="0 0.5 0"
          onclick="rotateModel()">
        </a-gui-button>

        <a-gui-button
          value="Move Left"
          width="1.8"
          height="0.4"
          position="0 0.1 0"
          onclick="moveLeft()">
        </a-gui-button>

        <a-gui-button
          value="Move Right"
          width="1.8"
          height="0.4"
          position="0 -0.3 0"
          onclick="moveRight()">
        </a-gui-button>

        <a-gui-button
          value="Zoom In"
          width="1.8"
          height="0.4"
          position="0 -0.7 0"
          onclick="zoomIn()">
        </a-gui-button>

        <a-gui-button
          value="Zoom Out"
          width="1.8"
          height="0.4"
          position="0 -1.1 0"
          onclick="zoomOut()">
        </a-gui-button>

      </a-gui-panel>
    </a-entity>

  </a-scene>

  <!-- SCRIPT -->
  <script>
    const model = document.querySelector('#model');

    function rotateModel() {
      const r = model.getAttribute('rotation');
      model.setAttribute('rotation', {
        x: r.x,
        y: r.y + 30,
        z: r.z
      });
    }

    function moveLeft() {
      const p = model.getAttribute('position');
      model.setAttribute('position', {
        x: p.x - 0.2,
        y: p.y,
        z: p.z
      });
    }

    function moveRight() {
      const p = model.getAttribute('position');
      model.setAttribute('position', {
        x: p.x + 0.2,
        y: p.y,
        z: p.z
      });
    }

    function zoomIn() {
      const s = model.getAttribute('scale');
      model.setAttribute('scale', {
        x: s.x + 0.1,
        y: s.y + 0.1,
        z: s.z + 0.1
      });
    }

    function zoomOut() {
      const s = model.getAttribute('scale');
      model.setAttribute('scale', {
        x: s.x - 0.1,
        y: s.y - 0.1,
        z: s.z - 0.1
      });
    }
  </script>
</body>
</html>
